<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wt.overflow.dao.SysOrganizeMapper" >
  <resultMap id="BaseResultMap" type="com.wt.overflow.bean.SysOrganize" >
      <id column="id" jdbcType="VARCHAR" property="id" />
      <result column="parentId" jdbcType="VARCHAR" property="parentid" />
      <result column="layers" jdbcType="INTEGER" property="layers" />
      <result column="enCode" jdbcType="VARCHAR" property="encode" />
      <result column="fullName" jdbcType="VARCHAR" property="fullname" />
      <result column="shortName" jdbcType="VARCHAR" property="shortname" />
      <result column="categoryId" jdbcType="VARCHAR" property="categoryid" />
      <result column="managerId" jdbcType="VARCHAR" property="managerid" />
      <result column="telePhone" jdbcType="VARCHAR" property="telephone" />
      <result column="mobilePhone" jdbcType="VARCHAR" property="mobilephone" />
      <result column="weChat" jdbcType="VARCHAR" property="wechat" />
      <result column="fax" jdbcType="VARCHAR" property="fax" />
      <result column="email" jdbcType="VARCHAR" property="email" />
      <result column="areaId" jdbcType="VARCHAR" property="areaid" />
      <result column="address" jdbcType="VARCHAR" property="address" />
      <result column="allowEdit" jdbcType="INTEGER" property="allowedit" />
      <result column="allowDelete" jdbcType="INTEGER" property="allowdelete" />
      <result column="sortCode" jdbcType="INTEGER" property="sortcode" />
      <result column="deleteMark" jdbcType="INTEGER" property="deletemark" />
      <result column="enabledMark" jdbcType="INTEGER" property="enabledmark" />
      <result column="description" jdbcType="VARCHAR" property="description" />
      <result column="creatorTime" jdbcType="TIMESTAMP" property="creatortime" />
      <result column="creatorUserId" jdbcType="VARCHAR" property="creatoruserid" />
      <result column="lastModifyTime" jdbcType="TIMESTAMP" property="lastmodifytime" />
      <result column="lastModifyUserId" jdbcType="VARCHAR" property="lastmodifyuserid" />
      <result column="deleteTime" jdbcType="TIMESTAMP" property="deletetime" />
      <result column="deleteUserId" jdbcType="VARCHAR" property="deleteuserid" />
  </resultMap>
  
  <sql id="Base_Column_List" >
      id, parentId, layers, enCode, fullName, shortName, categoryId, managerId, telePhone,
    mobilePhone, weChat, fax, email, areaId, address, allowEdit, allowDelete, sortCode,
    deleteMark, enabledMark, description, creatorTime, creatorUserId, lastModifyTime,
    lastModifyUserId, deleteTime, deleteUserId
  </sql>
  
  <select id="queryAllData" resultMap="BaseResultMap" parameterType="java.util.Map" >
    select 
    <include refid="Base_Column_List" />
    from sys_organize
    <where>	
    	deleteMark  = 0
    	<if test="nodeid != null and nodeid !='' ">
				and parentId = #{nodeid}
		</if>
    	<if test="keyword != null and keyword !='' ">
				and fullName like ('%'+#{keyword}+'%')
		</if>
    </where>
  </select>
    
</mapper>